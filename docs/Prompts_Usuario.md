pare de tirar conclusões precipitadas voce nem testou por algum motivo a o bot esta dando erro sempre pensando e pesquisando na internet veja que tivemos que dar um jeitinho ja pois ele enviava duas mesnsagens para o usuario vamos limpar organizar o que for necessario e fazer conforme os padroes da internet para o  Model: gemini-2.5-flash , lembrando sempre tomando cuidado para nao travar a api gratuita  agora veja os erros codigos duplicados e planeje como resolver , voce pode editar os arquivos aqui  localmente e depois subir com tudo corijido sempre validando se suas mudanças nao quebram nada 

---


ok agora vamos mudar um pouco a ideia quero formular essa aplicação de modo que eu possa vender para varias pessoas como atendentes especializados e que nao necessarioamente precisam se identificar como agentes eles tem como função simular um atendente mas vamos por partes , nunca faça tudo de uma vez defina o escopo o objetivo pesquise na internet pense os melhores modos de s implemntar esse sistema anexe tudo isso na pasta /docs , temos basicamnete uma aplicação quese pronta em http://localhost:8080/manager/  podemos personalizar o front end de modo a pertencer ao atende bot , colocar um sistema de login por usuario aproveitar algumas telas como dashboar  a tela chat configurações e criarmos um ambiente de controle de usuario  como estamos vendendo para as pessoas o produto elas logam personalizam o agente , escaneiam o qr como ja temos no codigo permite interação no chat visualizar enviar mensagens configurar algumas coisas basiscas como modo sem visualizar mensagen pesquise na internet tenha ideias olhe para essas ideias veja se estao de acordo com o esperado e pelo que é possivel evolua suas ideias pesquise funtes leia a documentação procure por aplicativos parecidas leia os codigos atuais 


---

teremos que reescreer tudo que ja esta pronto ? consertar os mesmo bugs que eles ja tiveram alem de ser demorado sera custoso , depois o sistema de loguin nao [e tao importante seu fogo deve ser em um agente que pensa antes de falar  interage como um ser humano e atende aos clientes sem se perder , ja temos enviar e resposta da api podemos trabalhar encima disso , podemos criar agentes controlados inicialmente por um html de um fluxo grama que o usuario pode interagir por exemplo criar um agente que da a resposta ou seja e um agente que recebe a mensagem do clente , depois passa para um segundo que ve se aquela mensagem que o q retornou esta cooerente com a conversa  e se esta humano , um terceiro que busca jardoes de ia  e filtra palavras desnecessarias sem comprometer a ideia do texto , pese por si mesmo nao vamos reinventar a roda ela ja esta na internet temso apenas que ser inteligentes e copiar 